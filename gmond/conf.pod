=pod

=head1 NAME

B<gmond.conf> - configuration file for ganglia monitoring
daemon (gmond)

=head1 DESCRIPTION

The gmond.conf file is used to configure the ganglia
monitoring daemon (gmond) which is part of the B<Ganglia
Distributed Monitoring System>.  

=head1 SECTIONS AND ATTRIBUTES

All sections and attributes are case-insensitive.  For example,
B<name> or B<NAME> or B<Name> or B<NaMe> are all equivalent.

Some sections can be included in the configuration file multiple
times and some sections are singular.  For example, you can
have only one B<cluster> section to define the attributes of
the cluster being monitored; however, you can have multiple
B<udp_recv_channel> sections to allow gmond to receive message
on multiple UDP channels.

=head2 cluster

There should only be one B<cluster> section defined.  This
section controls how gmond reports the attributes of the
cluster that it is part of.

The B<cluster> section has four attributes: B<name>,
B<owner>, B<latlong> and B<url>.

For example,

  cluster {
    name = "Millennium Cluster"
    owner = "UC Berkeley CS Dept."
    latlong = "N37.37 W122.23"
    url = "http://www.millennium.berkeley.edu/"
  }

The B<name> attributes specifies the name of the cluster of 
machines.  The B<owner> tag specifies the administrators of 
the cluster.  The pair B<name>/B<owner> should be unique
to all clusters in the world.

The B<latlong> attribute is the latitude and longitude GPS 
coordinates of this cluster on earth.  Specified to 1 mile 
accuracy with two decimal places per axis in decimal.

The B<url> for more information on the B<cluster>. 
Intended to give purpose, owner, administration, and account details 
for this cluster.

There directives directly control the XML output of gmond.  For
example, the cluster configuration example above would translate
into the following XML.

  <CLUSTER NAME="Millennium Cluster" OWNER="UC Berkeley CS Dept."
           LATLONG="N37.37 W122.23" URL="http://www.millennium.berkeley.edu/">
  ...
  </CLUSTER>

=head2 globals

The B<globals> section controls general characteristics of gmond
such as whether is should daemonize, what user it should run as,
whether is should send/receive date and such.  The B<globals>
section has seven attributes: B<daemonize>, B<setuid>, B<user>,
B<debug_level>, B<mute>, B<deaf>, B<host_dmax>.

For example,

  globals {
    daemonize = true
    setuid = true
    user = nobody
    host_dmax = 3600
  }

The B<daemonize> attribute is a boolean.  When true, B<gmond> will 
daemonize.  When false, B<gmond> will run in the foreground.

The B<setuid> attribute is a boolean.  When true, B<gmond> will
set its effective UID to the uid of the user specified by the B<user>
attribute.  When false, B<gmond> will not change its effective user.

The B<debug_level> is an integer value.  When set to zero (0), B<gmond>
will run normally.  A B<debug_level> greater than zero will result in
B<gmond> running in the foreground and outputting debugging information.
The higher the B<debug_level> the more verbose the output.

The B<mute> attribute is a boolean.  When true, B<gmond> will not 
send data regardless of any other configuration directives.

The B<deaf> attribute is a boolean.  When true, B<gmond> will not 
receive data regardless of any other configuration directives.

The B<host_dmax> value is an integer with units in seconds.  When set 
to zero (0), B<gmond> will never delete a host from its list even when 
a remote host has stopped responding.  If B<host_dmax> is set to a
positive number then B<gmond> will flush a host after it has not heard
from it for B<host_dmax> seconds.  By the way, dmax means "delete max".

=head2 udp_send_channel

You can define as many B<udp_send_channel> sections as you like within
the limitations of memory and file descriptors.  If B<gmond> is configured
as B<mute> this section will be ignored.

The B<udp_send_channel> has a total of five attributes: B<mcast_join>,
B<mcast_if>, B<ip>, B<port> and B<protocol>.

For example, the 2.5.x version gmond would send on the following single channel
by default...

  udp_send_channel {
    mcast_join = 239.2.11.71
    port       = 8649
    protocol   = xdr
  }

The B<mcast_join> and B<mcast_if> attributes are optional.  When specified
B<gmond> will create the UDP socket and join the B<mcast_join> multicast group
and send data out the interface specified by B<mcast_if>.

If only a B<ip> and B<port> are specified then B<gmond> will send unicast UDP
messages to the hosts specified.  You could specify multiple unicast hosts
for redundancy as B<gmond> will send UDP messages to all UDP channels.

For example...

  udp_send_channel {
    ip = 192.168.3.4
    port = 2344
  }
  udp_send_channel {
    ip = 192.168.3.8
    port = 2389
  }
 
would configure gmond to send messages to two hosts.

Currently, the only B<protocol> supported is B<xdr> which is the default.

=head2 udp_recv_channel

You can specify as many B<udp_recv_channel> sections as you like within the 
limits of memory and file descriptors.  If B<gmond> is configured B<deaf>
this attribute will be ignored.

The B<udp_recv_channel> section has a total of seven attributes:
B<mcast_join>, B<bind>, B<port>, B<mcast_if>, B<protocol>, B<allow_ip>
and B<allow_mask>.

For example, the 2.5.x gmond ran with a single udp receive channel...

  udp_recv_channel {
    mcast_join = 239.2.11.71
    bind       = 239.2.11.71
    port       = 8649
    protocol   = xdr
  }

The B<mcast_join> and B<mcast_if> should only be used if you want to 
have this UDP channel receive multicast packets the multicast
group B<mcast_join> on interface B<mcast_if>.  If you do not specify
multicast attributes then B<gmond> will simply create a UDP server
on the specified B<port>.

You can use the B<bind> attribute to bind to a particular local address.

Note: for multicast, specifying a B<bind> address that equals the B<mcast_join>
address will prevent unicast UDP messages to the same B<port> from being 
processed.

=head2 tcp_accept_channel

You can specify as many B<tcp_accept_channel> sections as you like
within the limitations of memory and file descriptors.  If B<gmond>
is configured to be B<mute>, then these sections are ignored.

The B<tcp_accept_channel> has six attributes: B<bind>, B<port>, 
B<interface>, B<protocol>, B<allow_ip> and B<allow_mask>.

For example, 2.5.x gmond would accept connections on a single TCP
channel.

  tcp_accept_channel {
    port = 8649
  }

The B<bind> address is optional and allows you to specify which 
local address B<gmond> will bind to for this channel.

The B<port> is an integer than specifies which port to answer 
requests for data.

The B<interface> is not implemented at this time (use B<bind>).

=head2 collection_group

...

=head1 EXAMPLE

The default behavior for a 2.5.x gmond would be specified as...

  udp_recv_channel {
    mcast_join = 239.2.11.71
    bind       = 239.2.11.71
    port       = 8649
  }
  udp_send_channel {
    mcast_join = 239.2.11.71
    port       = 8649
  }
  tcp_accept_channel {
    port       = 8649
  }

=head1 NOTES

The ganglia web site is at http://ganglia.info/

=head1 COPYRIGHT

Copyright (c) 2004 The University of California, Berkeley


=cut
