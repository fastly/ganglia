<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <title>Example Documentation</title>
 <link rel="stylesheet" href="tutorial.css" type="text/css">
</head>
<body>

<div class="main">

<!-- doxygen-header.html ends here -->
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>simple.c</h1><pre><div class="fragment"><span class="preprocessor">#include &lt;string.h&gt;</span>
<span class="preprocessor">#include "<a class="code" href="confuse_8h.html">confuse.h</a>"</span>

<span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)
{
    <a class="code" href="confuse_8h.html#a133">cfg_bool_t</a> verbose = cfg_false;
    <span class="keywordtype">char</span> *server = NULL;
    <span class="keywordtype">double</span> delay = 1.356e-32;
    <span class="keywordtype">char</span> *username = NULL;
    <span class="keywordtype">int</span> debug = 1;

    <a name="_a14"></a><a class="code" href="structcfg__opt__t.html">cfg_opt_t</a> opts[] = {
        <a name="a15"></a><a class="code" href="confuse_8h.html#a40">CFG_SIMPLE_BOOL</a>(<span class="stringliteral">"verbose"</span>, &amp;verbose),
        <a name="a16"></a><a class="code" href="confuse_8h.html#a19">CFG_SIMPLE_STR</a>(<span class="stringliteral">"server"</span>, &amp;server),
        <a class="code" href="confuse_8h.html#a19">CFG_SIMPLE_STR</a>(<span class="stringliteral">"user"</span>, &amp;username),
        <a name="a17"></a><a class="code" href="confuse_8h.html#a26">CFG_SIMPLE_INT</a>(<span class="stringliteral">"debug"</span>, &amp;debug),
        <a name="a18"></a><a class="code" href="confuse_8h.html#a33">CFG_SIMPLE_FLOAT</a>(<span class="stringliteral">"delay"</span>, &amp;delay),
        <a name="a19"></a><a class="code" href="confuse_8h.html#a47">CFG_END</a>()
    };
    <a name="_a20"></a><a class="code" href="structcfg__t.html">cfg_t</a> *cfg;

    <span class="comment">/* set default value for the server option */</span>
    server = strdup(<span class="stringliteral">"gazonk"</span>);

    cfg = <a name="a21"></a>cfg_init(opts, 0);
    <a name="a22"></a>cfg_parse(cfg, <span class="stringliteral">"simple.conf"</span>);

    printf(<span class="stringliteral">"verbose: %s\n"</span>, verbose ? <span class="stringliteral">"true"</span> : <span class="stringliteral">"false"</span>);
    printf(<span class="stringliteral">"server: %s\n"</span>, server);
    printf(<span class="stringliteral">"username: %s\n"</span>, username);
    printf(<span class="stringliteral">"debug: %d\n"</span>, debug);
    printf(<span class="stringliteral">"delay: %G\n"</span>, delay);

    printf(<span class="stringliteral">"setting username to 'foo'\n"</span>);
    <span class="comment">/* using cfg_setstr here is not necessary at all, the equivalent</span>
<span class="comment">     * code is:</span>
<span class="comment">     *   free(username);</span>
<span class="comment">     *   username = strdup("foo");</span>
<span class="comment">     */</span>
    <a name="a23"></a>cfg_setstr(cfg, <span class="stringliteral">"user"</span>, <span class="stringliteral">"foo"</span>);
    printf(<span class="stringliteral">"username: %s\n"</span>, username);

    <span class="comment">/* print the parsed values to another file */</span>
    {
        FILE *fp = fopen(<span class="stringliteral">"simple.conf.out"</span>, <span class="stringliteral">"w"</span>);
        <a name="a24"></a>cfg_print(cfg, fp);
        fclose(fp);
    }

    <a name="a25"></a>cfg_free(cfg);
    <span class="keywordflow">return</span> 0;
}
</div></pre><pre><div class="fragment">00001 <span class="preprocessor">#include &lt;string.h&gt;</span>
00002 <span class="preprocessor">#include "<a class="code" href="confuse_8h.html">confuse.h</a>"</span>
00003 
00004 <span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)
00005 {
00006     <a class="code" href="confuse_8h.html#a133">cfg_bool_t</a> verbose = cfg_false;
00007     <span class="keywordtype">char</span> *server = NULL;
00008     <span class="keywordtype">double</span> delay = 1.356e-32;
00009     <span class="keywordtype">char</span> *username = NULL;
00010     <span class="keywordtype">int</span> debug = 1;
00011 
00012     <a class="code" href="structcfg__opt__t.html">cfg_opt_t</a> opts[] = {
00013         <a class="code" href="confuse_8h.html#a40">CFG_SIMPLE_BOOL</a>(<span class="stringliteral">"verbose"</span>, &amp;verbose),
00014         <a class="code" href="confuse_8h.html#a19">CFG_SIMPLE_STR</a>(<span class="stringliteral">"server"</span>, &amp;server),
00015         <a class="code" href="confuse_8h.html#a19">CFG_SIMPLE_STR</a>(<span class="stringliteral">"user"</span>, &amp;username),
00016         <a class="code" href="confuse_8h.html#a26">CFG_SIMPLE_INT</a>(<span class="stringliteral">"debug"</span>, &amp;debug),
00017         <a class="code" href="confuse_8h.html#a33">CFG_SIMPLE_FLOAT</a>(<span class="stringliteral">"delay"</span>, &amp;delay),
00018         <a class="code" href="confuse_8h.html#a47">CFG_END</a>()
00019     };
00020     <a class="code" href="structcfg__t.html">cfg_t</a> *cfg;
00021 
00022     <span class="comment">/* set default value for the server option */</span>
00023     server = strdup(<span class="stringliteral">"gazonk"</span>);
00024 
00025     cfg = cfg_init(opts, 0);
00026     cfg_parse(cfg, <span class="stringliteral">"simple.conf"</span>);
00027 
00028     printf(<span class="stringliteral">"verbose: %s\n"</span>, verbose ? <span class="stringliteral">"true"</span> : <span class="stringliteral">"false"</span>);
00029     printf(<span class="stringliteral">"server: %s\n"</span>, server);
00030     printf(<span class="stringliteral">"username: %s\n"</span>, username);
00031     printf(<span class="stringliteral">"debug: %d\n"</span>, debug);
00032     printf(<span class="stringliteral">"delay: %G\n"</span>, delay);
00033 
00034     printf(<span class="stringliteral">"setting username to 'foo'\n"</span>);
00035     <span class="comment">/* using cfg_setstr here is not necessary at all, the equivalent</span>
00036 <span class="comment">     * code is:</span>
00037 <span class="comment">     *   free(username);</span>
00038 <span class="comment">     *   username = strdup("foo");</span>
00039 <span class="comment">     */</span>
00040     cfg_setstr(cfg, <span class="stringliteral">"user"</span>, <span class="stringliteral">"foo"</span>);
00041     printf(<span class="stringliteral">"username: %s\n"</span>, username);
00042 
00043     <span class="comment">/* print the parsed values to another file */</span>
00044     {
00045         FILE *fp = fopen(<span class="stringliteral">"simple.conf.out"</span>, <span class="stringliteral">"w"</span>);
00046         cfg_print(cfg, fp);
00047         fclose(fp);
00048     }
00049 
00050     cfg_free(cfg);
00051     <span class="keywordflow">return</span> 0;
00052 }
</div></pre> <!-- doxygen-footer.html starts here -->
  </div>
 </body>
</html>
